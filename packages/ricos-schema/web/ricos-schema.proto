syntax = "proto3";

import "google/protobuf/wrappers.proto";
import "plugin-image-schema.proto";
import "plugin-divider-schema.proto";
import "plugin-color-schema.proto";

message RicosContent {
    Document doc = 1; // Document root (required)
    Selection selection = 2; // Last saved selection
    string version = 3; // Ricos version used to create this schema (required)
}

message Document {
    repeated Node nodes = 1; // List of nodes (required)
    string lastEdited = 2; // Timestamp when the document was last edited (required)
}

message Selection {
    string anchorNode = 1; // Selection start node key (required)
    google.protobuf.Int32Value anchorOffset = 2; // Selection start offset (default: 0)
    google.protobuf.StringValue focusNode = 3; // Selection end node key
    google.protobuf.Int32Value focusOffset = 4; // Selection end offset (default: 0)
}

message Node {
    string type = 1; // Node type (required)
    string key = 2; // Node unique indentifier (required)
    repeated Node nodes = 3; // List of child nodes
    oneof data {
        TextData ricosText = 4;
        ImageData ricosImage = 5;
        DividerData ricosDivider = 6;
    }
}

message TextData {
    string text = 1; // Textual data (required)
    repeated Decoration decorations = 2; // List of decorations
}

// Adds appearence changes to text
message Decoration {
    string type = 1; // Decoration type (required)
    oneof data {
        ColorData ricosColor = 2;
    }
}