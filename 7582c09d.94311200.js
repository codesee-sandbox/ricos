(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{74:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return b}));var a=n(2),i=n(6),r=(n(0),n(115)),o={id:"preview",title:"Preview",sidebar_label:"Preview"},c={unversionedId:"ricos/preview",id:"ricos/preview",isDocsHomePage:!1,title:"Preview",description:"Introduction",source:"@site/docs/ricos/Preview.mdx",slug:"/ricos/preview",permalink:"/rich-content/docs/ricos/preview",version:"current",sidebar_label:"Preview",sidebar:"ricos",previous:{title:"Theming",permalink:"/rich-content/docs/ricos/theming"},next:{title:"Migrating to Version 8",permalink:"/rich-content/docs/ricos/migrations/v7-to-v8"}},l=[{value:"Introduction",id:"introduction",children:[]},{value:"Example",id:"example",children:[]},{value:"API",id:"api",children:[{value:"<code>transformation</code>",id:"transformation",children:[]},{value:"<code>contentInteractionMappers</code>",id:"contentinteractionmappers",children:[]},{value:"<code>onPreviewExpand</code>",id:"onpreviewexpand",children:[]}]}],p={rightToc:l};function b(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"introduction"},"Introduction"),Object(r.b)("p",null,"The Preview comes to meet the requirement for a brief content preview; similar concept could be found in social media applications.\nIt allows to create a shortened content display, ready to be expanded, based on rules that can be modified."),Object(r.b)("p",null,"The core idea is to transform the content state and to display it within ",Object(r.b)("inlineCode",{parentName:"p"},"RicosViewer"),". This transformation is a product of content state metadata and a set of rules defined by the consumer."),Object(r.b)("h2",{id:"example"},"Example"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx",metastring:"{9}","{9}":!0}),"import { createPreview } from 'wix-rich-content-preview';\nimport 'wix-rich-content-preview/dist/styles.min.css\n//\n//\nrender() {\n  const { content } = this.props;\n  return (\n    <RicosViewer\n      content={content}\n      preview={createPreview()}\n    />\n  );\n}\n")),Object(r.b)("p",null,"For visual examples, take a look in our ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"http://rich-content-storybook-master.surge.sh/?path=/story/preview--rules"}),"storybook page"),"."),Object(r.b)("hr",null),Object(r.b)("h2",{id:"api"},"API"),Object(r.b)("p",null,"There are 3 optional fields of configuration:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"createPreview({ transformation, contentInteractionMappers, onPreviewExpand });\n")),Object(r.b)("h3",{id:"transformation"},Object(r.b)("inlineCode",{parentName:"h3"},"transformation")),Object(r.b)("p",null,"The transformation consists of a predicate the content metadata is tested for, and an action to perform, if the predicate returns ",Object(r.b)("inlineCode",{parentName:"p"},"true"),"."),Object(r.b)("p",null,"Example:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"\n  _if: metadata => metadata.images.length >= 4,\n  _then: (metadata, preview) => preview.gallery({\n      items: metadata.images.slice(0, 4),\n      config: { layout: 'grid', imageWidth: 40 }\n  }).imageCounter({ counter: metadata.images.length - 4 })\n\n")),Object(r.b)("p",null,'The example above defines the following transformation rule: "if the content contains more than 4 images, the preview should display four of them as a grid gallery with image counter above the last image".'),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"default value: ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/wix-incubator/rich-content/blob/master/packages/preview/web/src/Components/default-transformation.js"}),"Default Transformation"))),Object(r.b)("hr",null),Object(r.b)("h3",{id:"contentinteractionmappers"},Object(r.b)("inlineCode",{parentName:"h3"},"contentInteractionMappers")),Object(r.b)("p",null,"Allows to pass the interaction mappings, similar to the ",Object(r.b)("inlineCode",{parentName:"p"},"typeMappers")," and ",Object(r.b)("inlineCode",{parentName:"p"},"inlineStyleMappers"),"."),Object(r.b)("h4",{id:"content-interactions"},"Content Interactions"),Object(r.b)("p",null,"The content interactions indicate that the preview content is collapsed, and provide a way to expand it. Content interactions work at the block level. Every interaction consists of the following elements:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"The ",Object(r.b)("inlineCode",{parentName:"p"},"preview")," builder parameter allows to add an interaction to the preview state and configure it."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"\n  preview.plain('some looong text').readMore({ lines: 5 }).image({ mediaInfo: {...} })\n\n")),Object(r.b)("p",{parentName:"li"},"In this example, the ",Object(r.b)("inlineCode",{parentName:"p"},"readMore")," interaction is being applied to the previous ",Object(r.b)("inlineCode",{parentName:"p"},"plain")," block.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("em",{parentName:"p"},"block data interactions array")," contains configuration data for all the interactions applied to the block")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("em",{parentName:"p"},"UI component")," defines the appearance of the interaction element"))),Object(r.b)("h5",{id:"predefined-interactions"},"Predefined Interactions"),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"wix-rich-content-preview")," introduces three predefined intertactions (which include both preview builder API and UI components): ",Object(r.b)("inlineCode",{parentName:"p"},"Image Counter"),", ",Object(r.b)("inlineCode",{parentName:"p"},"See Full Post"),", and ",Object(r.b)("inlineCode",{parentName:"p"},"Read More"),"."),Object(r.b)("h6",{id:"read-more"},"Read More"),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"Read More")," interacton shortens textual content to a desired number of lines appended by an ellipsis."),Object(r.b)("h6",{id:"see-full-post"},"See Full Post"),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"See Full Post")," displays a text label over an overlay. Mouse click expands the full content."),Object(r.b)("h6",{id:"image-counter"},"Image Counter"),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"Image Counter")," displays hidden image counter. By default, the counter label ",Object(r.b)("inlineCode",{parentName:"p"},"+N")," placed above the last visible image element. The image elements are selected by ",Object(r.b)("inlineCode",{parentName:"p"},"role='img'")," attribute."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"default value: ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/wix-incubator/rich-content/blob/master/packages/preview/web/src/Interactions/interactionMap.tsx"}),"Default Interaction Map"))),Object(r.b)("hr",null),Object(r.b)("h3",{id:"onpreviewexpand"},Object(r.b)("inlineCode",{parentName:"h3"},"onPreviewExpand")),Object(r.b)("p",null,"A callback that is triggered upon preview expand click. Occurs once in a viewer session."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"default value: undefined")))}b.isMDXComponent=!0}}]);